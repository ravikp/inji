# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane

# Fastfile

plugins = [
  "fastlane-plugin-increment_version_code",
  "fastlane-plugin-sentry"
]

default_platform(:android)

  desc "Build, increment version code and name"
  lane :build_and_increment do
    increment_vc
    increment_vname
    build_android
    build_bundle
  end

# platform :android do
#   desc "Execute Android"
#   lane :execute_android do
#   yes | sudo increment_vc
#   yes | sudo increment_vname
#   yes | sudo build_android
#   end

  desc "Increment version code"
  lane :increment_vc do
  increment_version_code(
       gradle_file_path: "./app/build.gradle",
  )
  end

  desc "Increment version name"
  lane :increment_vname do
  increment_version_name(
       gradle_file_path: "./app/build.gradle",
 )
  end

  desc "Build Android"
  lane :build_android do
  # increment_version_code(
  #     gradle_file_path: "./app/build.gradle",
  # )
  # increment_version_name(
  #      gradle_file_path: "./app/build.gradle",
  # )
  gradle(
     task: "clean bundleNewlogicRelease",
  )
  end

  desc "Build Bundle"
  lane :echo_version do
    sh(task:"echo node -v")
  end

  lane :my_lane do
    node_version = sh('node --version')
    puts "Node.js version: #{node_version}"
  end
  



